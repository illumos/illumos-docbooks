<chapter id="flashinstall-10"><title>Installing and Administering Solaris Flash Archives
(Tasks)</title><highlights><para>This chapter provides step-by-step procedures for installing a Solaris Flash archive
by using the Solaris installation program. This chapter also provides references
to procedures for installing Solaris Flash archives when using other
installation programs. Also, step-by-step procedures for administering an
archive are provided. </para><caution><para>When installing the Solaris OS with a Solaris Flash archive,
the archive and the installation media must contain identical operating system
versions. For example, if the archive is a Solaris 10 operating system and
you are using DVD media, then you must use Solaris 10 DVD media to install
the archive. If the operating systems versions do not match, the installation
on the target system fails. </para>
</caution><itemizedlist><listitem><para>If you want to use the Solaris installation program, see <olink targetptr="flashinstall-101" remap="internal">Installing a Solaris Flash Archive With the Solaris
Installation Program</olink>.</para>
</listitem><listitem><para>If you want to use the custom JumpStart installation method
or Solaris Live Upgrade, see <olink targetptr="flashinstall-100" remap="internal">References
to Procedures for Installing Solaris Flash Archives</olink>.</para>
</listitem><listitem><para>To split or merge an archive, see <olink targetptr="flashinstall-201" remap="internal">Administering Solaris Flash Archives</olink>.</para>
</listitem>
</itemizedlist>
</highlights><sect1 id="flashinstall-101"><title>Installing a Solaris Flash Archive
With the Solaris Installation Program</title><para>To use the
Solaris installation program to install a Solaris Flash archive, use the following
procedure. </para><task id="etfbv"><title>Installing a Solaris Flash Archive</title><procedure><step><para>Begin the Solaris installation program and proceed through the
panels until you reach the Specify Media panel. Continue with Solaris Flash installation.</para><para>For the step-by-step procedures, see either of the following
procedures.</para><itemizedlist><listitem><para>SPARC: <olink targetdoc="solarisinstall" targetptr="webstart-96" remap="external"><citetitle remap="section">Performing an Installation or Upgrade With the Solaris Installation Program</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Basic Installations</citetitle></olink></para>
</listitem><listitem><para>x86: <olink targetdoc="solarisinstall" targetptr="webstart-39" remap="external"><citetitle remap="section">Performing an Installation or Upgrade With the Solaris Installation Program</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Basic Installations</citetitle></olink></para>
</listitem>
</itemizedlist>
</step><step id="etfcg"><para>Specify the media you are using to install.</para><substeps><step id="etfcf"><para>Type the information that you are prompted to enter.</para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="32.72*"/><colspec colname="colspec1" colwidth="67.28*"/><thead><row rowsep="1"><entry><para>Media Selected</para>
</entry><entry><para>Prompt</para>
</entry>
</row>
</thead><tbody><row><entry><para>DVD or CD</para>
</entry><entry><para>Insert the disc where the Solaris Flash archive is located.</para>
</entry>
</row><row><entry><para>Network File System</para>
</entry><entry><para>Specify the path to the network file system where the Solaris Flash archive
is located. You can also specify the archive file name.</para>
</entry>
</row><row><entry><para>HTTP</para>
</entry><entry><para>Specify the URL and proxy information that is needed to access the Solaris Flash archive.</para>
</entry>
</row><row><entry colname="colspec0"><para>FTP</para>
</entry><entry colname="colspec1"><para>Specify the FTP server and the path to the Solaris Flash archive.
Specify the user and password information that allows you access to the FTP
server. Specify any proxy information that is needed to access the FTP server.</para>
</entry>
</row><row><entry colname="colspec0"><para>Local tape</para>
</entry><entry colname="colspec1"><para>Specify the local tape device and the position on the tape where the Solaris Flash archive
is located.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>If you selected to install an archive from a DVD, CD,
or from an NFS server, the Select Flash Archives panel is displayed.</para>
</step><step><para>For archives that are stored on a disc or an NFS server, on the
Select Flash Archives panel, select one or more Solaris Flash archives
to install.</para>
</step><step><para>On the Flash Archives Summary panel, confirm the selected archives
and click Next.</para>
</step><step><para>On the Additional Flash Archives panel, you can install an additional Solaris Flash archive
by specifying the media where the other archive is located. If you do not
want to install additional archives, select None. </para>
</step>
</substeps>
</step><step><para>Click Next to continue the installation. </para><para>Follow the
steps from one of the following procedures to complete the installation.</para><itemizedlist><listitem><para>SPARC: <olink targetdoc="solarisinstall" targetptr="webstart-96" remap="external"><citetitle remap="section">Performing an Installation or Upgrade With the Solaris Installation Program</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Basic Installations</citetitle></olink></para>
</listitem><listitem><para>x86: <olink targetdoc="solarisinstall" targetptr="webstart-39" remap="external"><citetitle remap="section">Performing an Installation or Upgrade With the Solaris Installation Program</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Basic Installations</citetitle></olink></para>
</listitem>
</itemizedlist>
</step>
</procedure>
</task>
</sect1><sect1 id="flashinstall-100"><title>References to Procedures for Installing Solaris Flash Archives</title><para>You can use any of
the Solaris installation methods to install Solaris Flash archives for
an initial installation. You must use custom JumpStart or Solaris Live Upgrade
to install a Solaris Flash differential archive. </para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colwidth="17.09*"/><colspec colwidth="82.91*"/><thead><row rowsep="1"><entry><para>Type of Installation</para>
</entry><entry><para>Reference</para>
</entry>
</row>
</thead><tbody><row><entry><para>An initial installation to install a Solaris Flash archive</para>
</entry><entry><itemizedlist><listitem><para>Solaris installation program &ndash; See the previous procedure <olink targetptr="flashinstall-101" remap="internal">Installing a Solaris Flash Archive With the Solaris
Installation Program</olink></para>
</listitem><listitem><para>Solaris Live Upgrade &ndash; See <olink targetdoc="solinstallupg" targetptr="luupgrade-83" remap="external"><citetitle remap="section">Installing Solaris Flash Archives on a Boot Environment</citetitle> in <citetitle remap="book">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</citetitle></olink>.</para>
</listitem><listitem><para>Custom JumpStart installation program &ndash; See <olink targetdoc="solinstalladv" targetptr="preparecustom-53442" remap="external"><citetitle remap="section">Creating a Profile</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink> and <olink targetdoc="solinstalladv" targetptr="flash-46" remap="external"><citetitle remap="section">To Prepare to Install a Solaris Flash Archive With a Custom JumpStart Installation</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para>
</listitem><listitem><para>WAN boot installation method &ndash; See <olink targetdoc="solinstallnet" targetptr="wanbootoverview-1" remap="external">Chapter 9, <citetitle remap="chapter">WAN Boot (Overview),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle></olink>.</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>An update with a Solaris Flash differential archive</para>
</entry><entry><itemizedlist><listitem><para>Custom JumpStart installation program &ndash; See <olink targetdoc="solinstalladv" targetptr="preparecustom-53442" remap="external"><citetitle remap="section">Creating a Profile</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink> and <olink targetdoc="solinstalladv" targetptr="flash-46" remap="external"><citetitle remap="section">To Prepare to Install a Solaris Flash Archive With a Custom JumpStart Installation</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para>
</listitem><listitem><para>Solaris Live Upgrade &ndash; See <olink targetdoc="solinstallupg" targetptr="luupgrade1-8800" remap="external"><citetitle remap="section">To Install a Solaris Flash Archive With a Profile</citetitle> in <citetitle remap="book">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</citetitle></olink>.</para>
</listitem>
</itemizedlist>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1><sect1 id="flashinstall-201"><title>Administering Solaris Flash Archives</title><para>The <command>flar</command> command
enables you to administer archives. You can split an archive into sections.
Those sections can be modified, added to, or deleted, and then merged to create
an archive. You can also obtain information about the archive.</para><caution><para>Do not modify the Archive Files section or you compromise the
integrity of the archive.</para>
</caution><sect2 id="flashinstall-206"><title>Splitting a Solaris Flash Archive</title><para>You can split an archive into sections, which enables you to modify
some sections, add new sections, or delete sections. After you have modified
the sections, you need to merge the sections to create an new archive. For
example, you might want to add a user-defined section or modify the archive
identification section. Do not modify the Archive Files section or you compromise
the integrity of the archive. </para><para>The <command>flar split</command> command splits a Solaris Flash archive
into sections.  The <command>flar</command> command copies each section into
a separate file in the current directory or specified directory. The files
are named after the sections, for example, the archive cookie is saved in
a file that is named <filename>cookie</filename>.  You can specify that the <command>flar split</command> command save only one section. The syntax of the command
is as follows:</para><para><command>flar</command> <literal>split</literal> [<option>d</option> <replaceable>dir</replaceable>] [<option>u</option> <replaceable>section</replaceable>]
[<option>f</option> archive] [<option>S</option> <replaceable>section</replaceable>]
[<option>t</option> [<option>p</option> <replaceable>posn</replaceable>] [<option>b</option> <replaceable>blocksize</replaceable>]] <replaceable>filename</replaceable></para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="24.20*"/><colspec colname="colspec1" colwidth="75.80*"/><tbody><row><entry><para><option>d</option> <replaceable>dir</replaceable></para>
</entry><entry><para>Retrieves the sections to copy from <replaceable>dir</replaceable>,
rather than from the current directory.</para>
</entry>
</row><row><entry><para><option>u</option> <replaceable>section</replaceable></para>
</entry><entry><itemizedlist><listitem><para>If you use this option, <command>flar</command> copies the
cookie, identification, archive, and <replaceable>section</replaceable> sections.
 You can specify a single section name or a space-separated list of section
names.</para>
</listitem><listitem><para>If you do <emphasis>not</emphasis> use this option, <command>flar</command> copies the cookie, identification, and archive sections only.</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para><option>f</option> archive</para>
</entry><entry><para>Extracts the archive section into a directory that is named <filename>archive</filename>, rather than placing it in a file with the name <filename>archive</filename>.</para>
</entry>
</row><row><entry><para><option>S</option> <replaceable>section</replaceable></para>
</entry><entry><para>Only copies the section that is named <replaceable>section</replaceable> from
the archive. This section is user defined.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><example id="flashinstall-ex-203"><title>Splitting an Archive</title><para>In the following example, <filename>archive1.flar</filename> is split
into three files: </para><itemizedlist><listitem><para><filename>cookie</filename> &ndash; The first line of the
archive, which identifies the version of the archive format. Do not change
this identifier.</para>
</listitem><listitem><para><filename>identification</filename> &ndash; A copy of the
archive identification section with all keyword-value pairs.</para>
</listitem><listitem><para><filename>archive</filename> &ndash; The archive itself. This
file can be compressed.</para>
</listitem>
</itemizedlist><screen># <userinput>flar split archive1.flar</userinput></screen><para>After the archive is split, you can modify the archive identification
section or add a user-defined section. The sections can then be merged to
re-create the archive.</para>
</example>
</sect2><sect2 id="flashinstall-207"><title>Merging Solaris Flash Archives</title><para>After you have split an archive into sections, you can combine the sections
to create a new archive.</para><para>The <command>flar combine</command> command creates a Solaris Flash archive
from individual sections.  The following table describes how the <command>flar</command> command
handles combining sections.</para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colwidth="24.43*"/><colspec colwidth="75.57*"/><thead><row rowsep="1"><entry><para>Conditions</para>
</entry><entry><para>Description</para>
</entry>
</row>
</thead><tbody><row><entry><para>Minimum number of files</para>
</entry><entry><para>Each section is assumed to be in a separate file, the names of which
are the section names. These three files must be present: </para><itemizedlist><listitem><para>Archive cookie (<filename>cookie</filename>) </para>
</listitem><listitem><para>Archive identification (<filename>identification</filename>)</para>
</listitem><listitem><para>Archive files (<filename>archive</filename>) </para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Archive copy method</para>
</entry><entry><para>If <filename>archive</filename> is a directory, the contents are archived
before including the directory in the combined archive by using the <command>cpio</command> copy utility.</para><para>One of the following copy methods is used:</para><itemizedlist><listitem><para><command>pax</command> is the default copy method. The <command>flarcreate</command> command with the <option>L pax</option> option uses the <command>pax</command> utility
to create an archive without limitations on individual file sizes. Individual
file sizes can be greater than 4 GB.</para>
</listitem><listitem><para><command>cpio</command> is an archive method for backward
compatibility. The <command>flarcreate</command> command with the <option>L
cpio</option> option creates a <command>cpio</command> archive. Individual
file sizes cannot be greater than 4 GB.</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Compressing an archive</para>
</entry><entry><para>If the archive identification section specifies to compress the archive, <command>flar</command> compresses the contents of the newly combined archive. </para>
</entry>
</row><row><entry><para>Validation</para>
</entry><entry><para>No validation is performed on any of the sections.  In particular, no
fields in the archive identification section are validated or updated.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>The following command syntax is for <command>flar combine</command> command.</para><para><command>flar</command> <literal>combine</literal> [<option>d</option> <replaceable>dir</replaceable>] [<option>u</option> <replaceable>section</replaceable>]
[<option>t</option> [<option>p</option> <replaceable>posn</replaceable>] [<option>b</option> <replaceable>blocksize</replaceable>]] <replaceable>filename</replaceable></para><variablelist><varlistentry><term><option>d</option> <replaceable>dir</replaceable></term><listitem><para>Retrieves the sections to combine from <replaceable>dir</replaceable>,
rather than from the current directory.</para>
</listitem>
</varlistentry><varlistentry><term><option>u</option> <replaceable>section</replaceable></term><listitem><itemizedlist><listitem><para>If you use this option, <command>flar</command> copies the
cookie, identification, archive, and <replaceable>section</replaceable> sections.
 You can specify a single section name or a space-separated list of section
names.</para>
</listitem><listitem><para>If you do <emphasis>not</emphasis>  use this option, <command>flar</command> copies the cookie, identification, and archive sections only.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist><example id="flashinstall-ex-204"><title>Merging a Solaris Flash Archive</title><para>In this example, an archive cookie section, an archive identification
section, and an archive files section are combined to become a complete archive.
The archive is named <filename>newarchive.flar</filename>.</para><screen># <userinput>flar combine newarchive.flar</userinput> </screen>
</example><example id="flashinstall-ex-209"><title>Merging a Solaris Flash Archive
and Adding a User-Defined Section</title><para>In this example, an archive cookie section, an archive identification
section, an archive files section, and a user-defined section are combined
to become a complete archive. The archive is named <filename>newarchive.flar</filename>.
The user-defined section content is in the file that is named <filename>user-defined</filename>, which is in the current directory.</para><screen># <userinput>flar combine -u user_defined newarchive.flar</userinput> </screen>
</example>
</sect2><sect2 id="flashinstall-208"><title>Extracting Information From an Archive</title><para>Use the <command>flar info</command> command to obtain information
about archives you have already created. The syntax of the command is as follows:</para><para><command>flar</command> <literal>info</literal> [<option>l</option>]
[<option>k</option> <replaceable>keyword</replaceable>] [<option>t</option> [<option>p</option> <replaceable>posn</replaceable>] [<option>b</option> <replaceable>blocksize</replaceable>]] <replaceable>filename</replaceable></para><variablelist><varlistentry><term><option>k</option> <replaceable>keyword</replaceable></term><listitem><para>Returns only the value of the keyword <replaceable>keyword</replaceable>.</para>
</listitem>
</varlistentry><varlistentry><term><option>l</option></term><listitem><para>Lists all the files in the archive section. </para>
</listitem>
</varlistentry>
</variablelist><example id="flashinstall-ex-210"><title>Listing Files in an Archive Section</title><para>In this example, the command checks the file structure of the archive
named <filename>archive3.flar</filename>.</para><screen># <userinput>flar info -l archive3.flar</userinput>
aaa
aaa/bbb
aaa/bbb/ccc
aaa/bbb/ccc/ddd
aaa/eee</screen>
</example>
</sect2>
</sect1>
</chapter>